# mysqldump

#### Table of Contents

1. [Overview](#overview)
2. [Usage](#usage)
3. [Limitations](#limitations)
4. [Development](#development)

## Overview

This module creates a simple BASH script that performs a mysqldump of
specified databases using the `mysqldump::backup` defined type.

It uses the same MySQL user/password credentials listed in the .my.cnf file of
the user's home directory.

By default the Bash script is placed in /var/scripts/backup-scripts/ which
needs to exist.

The script is named backup_mysql_databases.sh

[![Build Status](https://secure.travis-ci.org/juniorsysadmin/puppet-mysqldump.png)](http://travis-ci.org/juniorsysadmin/puppet-mysqldump)

## Usage

```puppet
class { '::mysqldump': }
mysqldump::backup { 'database1': }
mysqldump::backup { 'database2': }
...
```

will result in:

```shell
#!/bin/bash
# backup_mysql_databases.sh
# This file was generated by Puppet. If you modify it, it will be overwritten
on the next Puppet run.

# MySQL credentials will be based off the .my.cnf file in the user's home
# directory

TIMESTAMP=`/bin/date +%F`

# database1
/usr/bin/mysqldump --routines database1 | /bin/gzip > /var/backup/database1-${TIMESTAMP}.sql.gz

# database2
/usr/bin/mysqldump --routines database2 | /bin/gzip > /var/backup/database2-${TIMESTAMP}.sql.gz
```

### Parameters

The following parameters are available in the mysqldump module:

#### `date_format`

The format options passed to the date command. Defaults to +%F

#### `date_path`

Path to the date command. Defaults to /bin/date

#### `dump_dir`

Where to put the MySQL dumps. Defaults to /var/backup

#### `gzip_path`

Path to the gzip command. Defaults to /bin/gzip

#### `mysqldump_options`

Options passed to mysqldump. Defaults to --routines

#### `mysqldump_path`

Path to the mysqldump command. Defaults to /usr/bin/mysqldump

#### `scripts_dir`

Where to put the Bash shell script. Defaults to /var/scripts/backup_scripts

## Limitations

This module has received limited testing on:

* CentOS/RHEL 6

against Puppet 3.x

## Development

Patches are welcome.
